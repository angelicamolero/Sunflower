{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\acer\\\\Downloads\\\\Sunflower\\\\src\\\\context\\\\CartContext.js\";\nimport React, { createContext, useState } from 'react';\nimport { useFirebaseApp } from '../firebase';\nimport dataJson from '../data.json';\nexport const CartContext = createContext();\n\nconst CartProvider = ({\n  children\n}) => {\n  const [cart, addToCart] = useState([]);\n  const [count, setCount] = useState(1);\n  const firebase = useFirebaseApp();\n\n  const selectProduct = prodID => {\n    const product = dataJson.filter(p => p.id === prodID)[0];\n    firebase.analytics().setUserProperties({\n      quantity: 1\n    });\n\n    if (!cart.find(item => item.id === product.id)) {\n      addToCart([...cart, product //tambien puede ser ...product y borrar el [0]\n      ]);\n    }\n  };\n\n  const addMore = prod => {\n    setCount(count + 1); // (prod.quantity === undefined) ? prod.quantity = 1 : null;\n\n    if (cart[cart.findIndex(item => item.id === prod.id)].quantity === undefined) {\n      prod.quantity = 1;\n    } else {\n      cart[cart.findIndex(item => item.id === prod.id)].quantity++;\n    }\n\n    addToCart(cart);\n  };\n\n  const lessMore = prod => {\n    setCount(count - 1);\n\n    if (cart[cart.findIndex(item => item.id === prod.id)].quantity === 1) {\n      alert('No menos de 1');\n      setCount(1);\n    } else {\n      cart[cart.findIndex(item => item.id === prod.id)].quantity--;\n      addToCart(cart);\n    }\n  };\n\n  const sumItems = item => {\n    let total = [item].reduce((t, product) => t + product.price * product.quantity, 0).toFixed(2);\n    return total;\n  };\n\n  const deleteProduct = prodId => {\n    const product = cart.filter(p => p.id !== prodId);\n    addToCart(product);\n  };\n\n  const cleanCart = () => addToCart([]);\n\n  return /*#__PURE__*/React.createElement(CartContext.Provider, {\n    value: {\n      cart,\n      qty: cart.length,\n      sumItems,\n      selectProduct,\n      addMore,\n      lessMore,\n      deleteProduct,\n      cleanCart\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, children);\n};\n\nexport default CartProvider;","map":{"version":3,"sources":["C:/Users/acer/Downloads/Sunflower/src/context/CartContext.js"],"names":["React","createContext","useState","useFirebaseApp","dataJson","CartContext","CartProvider","children","cart","addToCart","count","setCount","firebase","selectProduct","prodID","product","filter","p","id","analytics","setUserProperties","quantity","find","item","addMore","prod","findIndex","undefined","lessMore","alert","sumItems","total","reduce","t","price","toFixed","deleteProduct","prodId","cleanCart","qty","length"],"mappings":"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","sourcesContent":["import React, {createContext, useState} from 'react';\r\nimport { useFirebaseApp } from '../firebase';\r\nimport dataJson from '../data.json';\r\n\r\nexport const CartContext = createContext();\r\n\r\nconst CartProvider = ({children}) => {\r\n    const [cart, addToCart] = useState([]);\r\n    const [count, setCount] = useState(1);\r\n    const firebase = useFirebaseApp();\r\n\r\n    const selectProduct = (prodID) => {\r\n        const product = dataJson.filter(p => p.id === prodID)[0];\r\n        \r\n        firebase.analytics().setUserProperties({quantity: 1});\r\n        if(!cart.find(item => item.id === product.id)){\r\n            addToCart([\r\n                ...cart,\r\n                product //tambien puede ser ...product y borrar el [0]\r\n            ]);\r\n        }\r\n    }\r\n\r\n    const addMore = (prod) =>{\r\n        setCount(count + 1);\r\n        // (prod.quantity === undefined) ? prod.quantity = 1 : null;\r\n        if(cart[cart.findIndex(item => item.id === prod.id)].quantity === undefined){\r\n            prod.quantity = 1;\r\n        } else{\r\n            cart[cart.findIndex(item => item.id === prod.id)].quantity++\r\n        }\r\n        \r\n        addToCart(cart);\r\n    }\r\n\r\n    const lessMore = (prod) =>{\r\n        setCount(count - 1)\r\n        if(cart[cart.findIndex(item => item.id === prod.id)].quantity === 1){\r\n            alert('No menos de 1');\r\n            setCount(1);\r\n        } else {\r\n            cart[cart.findIndex(item => item.id === prod.id)].quantity--\r\n            addToCart(cart);\r\n        }\r\n    }\r\n\r\n    const sumItems = item => {\r\n        let total = [item].reduce((t, product) => t + product.price * product.quantity, 0).toFixed(2);\r\n        return total\r\n    }\r\n\r\n    const deleteProduct = (prodId) => {\r\n        const product = cart.filter(p => p.id !== prodId)\r\n        addToCart(product);\r\n    }\r\n\r\n    const cleanCart = () => addToCart([]);\r\n\r\n    return ( \r\n        <CartContext.Provider\r\n            value={{\r\n                cart,\r\n                qty: cart.length,\r\n                sumItems,\r\n                selectProduct,\r\n                addMore,\r\n                lessMore,\r\n                deleteProduct,\r\n                cleanCart\r\n            }}\r\n        >\r\n            {children}\r\n        </CartContext.Provider>\r\n     );\r\n}\r\n \r\nexport default CartProvider;"]},"metadata":{},"sourceType":"module"}